# AI聊天网站功能需求文档

## 项目概述

本项目旨在开发一个类似ChatGPT的AI聊天网站，使用DeepSeek的API作为后端服务。用户需要自行配置API密钥，配置成功后将进行浏览器缓存，以便后续使用。

## 核心功能

### 1. 用户配置

- **API密钥配置**：用户可以输入自己的DeepSeek API密钥
- **密钥验证**：验证用户输入的API密钥是否有效
- **本地存储**：使用浏览器的localStorage存储API密钥，避免重复输入
- **密钥管理**：用户可以查看、修改或删除已保存的API密钥

### 2. 聊天界面

- **消息输入框**：用户可以输入问题或指令
- **消息展示区**：展示用户消息和AI回复的对话历史
- **消息状态**：显示消息发送、接收和错误状态
- **Markdown渲染**：支持AI回复中的Markdown格式，包括代码块、表格等
- **代码高亮**：对代码块进行语法高亮显示

### 3. 会话管理

- **新建会话**：用户可以创建新的对话
- **会话列表**：显示历史会话列表
- **会话切换**：用户可以在不同会话间切换
- **会话保存**：自动保存会话内容到本地存储
- **会话删除**：用户可以删除不需要的会话

### 4. AI交互

- **消息发送**：将用户输入发送到DeepSeek API
- **流式响应**：支持流式接收AI回复，实现打字机效果
- **上下文保持**：保持对话上下文，使AI能够理解连续对话
- **错误处理**：处理API调用过程中可能出现的错误

### 5. 用户界面

- **响应式设计**：适配不同设备屏幕大小
- **深色/浅色模式**：支持切换界面主题
- **加载状态**：显示AI思考和回复过程中的加载状态
- **简洁界面**：简洁直观的用户界面设计

## 技术栈

- **前端框架**：React
- **构建工具**：Vite
- **UI组件库**：Tailwind CSS
- **状态管理**：React Context API
- **HTTP客户端**：Axios
- **Markdown渲染**：react-markdown
- **代码高亮**：prism-react-renderer
- **本地存储**：localStorage API

## 项目结构

```
ai-chat-demo/
├── public/
│   └── favicon.ico
├── src/
│   ├── components/
│   │   ├── ApiKeyConfig.jsx
│   │   ├── ChatInput.jsx
│   │   ├── ChatMessage.jsx
│   │   ├── ChatWindow.jsx
│   │   ├── Header.jsx
│   │   ├── SessionList.jsx
│   │   └── ThemeToggle.jsx
│   ├── contexts/
│   │   ├── ApiKeyContext.jsx
│   │   ├── ChatContext.jsx
│   │   └── ThemeContext.jsx
│   ├── services/
│   │   └── api.js
│   ├── utils/
│   │   ├── localStorage.js
│   │   └── markdown.js
│   ├── App.jsx
│   ├── index.css
│   └── main.jsx
├── .gitignore
├── index.html
├── package.json
├── README.md
└── vite.config.js
```

## 开发计划

1. 项目初始化和基础架构搭建
2. 实现API密钥配置和存储功能
3. 开发基础聊天界面和消息展示
4. 实现与DeepSeek API的交互
5. 添加会话管理功能
6. 优化用户界面和用户体验
7. 测试和修复bug
8. 部署上线

## 注意事项

- API密钥安全：确保API密钥只存储在客户端，不发送到除DeepSeek API之外的任何服务器
- 响应性能：优化大量消息时的渲染性能
- 错误处理：妥善处理网络错误和API限制
- 用户体验：保证流畅的交互体验和清晰的反馈机制